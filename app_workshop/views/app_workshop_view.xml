<?xml version="1.0"?>
<odoo>

    

        <record id="action_app_workshop_cust_inv_view" model="ir.actions.act_window">
            <field name="name">Customer Invoice</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_workshop_id':active_id,'default_type': 'out_invoice','type':'out_invoice', 'journal_type': 'sale'}</field>
            <field name="domain">[('workshop_id','=',active_id),('type','=','out_invoice')]</field>
        </record>

        <record id="action_app_workshop_vend_inv_view" model="ir.actions.act_window">
            <field name="name">Vendor Invoice</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_workshop_id':active_id,'default_type': 'in_invoice','type':'in_invoice', 'journal_type': 'purchase'}</field>
            <field name="domain">[('workshop_id','=',active_id),('type','=','in_invoice')]</field>
        </record>

        <record id="action_app_workshop_cust_pay_view" model="ir.actions.act_window">
            <field name="name">Customer Payment</field>
            <field name="res_model">account.payment</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_workshop_id':active_id,'default_payment_type': 'inbound', 'default_partner_type': 'customer', 'search_default_inbound_filter': 1}</field>
            <field name="domain">[('workshop_id','=',active_id),('payment_type','=','inbound'),('partner_type','=','customer')]</field>
        </record>

        <record id="action_app_workshop_vend_pay_view" model="ir.actions.act_window">
            <field name="name">Vendor Payment</field>
            <field name="res_model">account.payment</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_workshop_id':active_id,'default_payment_type': 'outbound', 'default_partner_type': 'supplier', 'search_default_outbound_filter': 1}</field>
            <field name="domain">[('workshop_id','=',active_id),('payment_type','=','outbound'),('partner_type','=','supplier')]</field>
        </record>

        <record id="action_open_app_backorder_view" model="ir.actions.act_window">
            <field name="name">Workshop Back-Orders</field>
            <field name="res_model">app.workshop.line</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_parent_id':active_id}</field>
            <field name="domain">[('parent_id','=',active_id)]</field>
        </record>

        <record id="action_open_app_service_view" model="ir.actions.act_window">
            <field name="name">Service Task</field>
            <field name="res_model">app.workshop.line</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_workshop_id':active_id}</field>
            <field name="domain">[('workshop_id','=',active_id)]</field>
        </record>

        <record id="action_open_app_spare_view" model="ir.actions.act_window">
            <field name="name">Spare Order</field>
            <field name="res_model">app.workshop.spare.order</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_workshop_id':active_id}</field>
            <field name="domain">[('workshop_id','=',active_id)]</field>
        </record>

        <record id="action_open_app_picking_view" model="ir.actions.act_window">
            <field name="name">Picking</field>
            <field name="res_model">stock.picking</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_workshop_id':active_id}</field>
            <field name="domain">[('workshop_id','=',active_id)]</field>
        </record>

        <record id="action_open_app_workshop_partner_view" model="ir.actions.act_window">
            <field name="name">Workshop Order</field>
            <field name="res_model">app.workshop</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_partner_id':active_id}</field>
            <field name="domain">[('partner_id','=',active_id)]</field>
        </record>

        <record id="action_open_app_workshop_fleet_view" model="ir.actions.act_window">
            <field name="name">Workshop Order</field>
            <field name="res_model">app.workshop</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_vehicle_id':active_id}</field>
            <field name="domain">[('vehicle_id','=',active_id)]</field>
        </record>

        <!-- Add Workshop product form view product_template_form_view -->
        <record id="view_product_template_inh_form_app" model="ir.ui.view">
            <field name="name">product_template_form_view.app.inherited1</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_form_view"/>
            <field name="arch" type="xml">
                <data>
                    <field name="product_variant_id" position="after">
                        <field name="stander_time" />
                    </field>
                </data>
            </field>
        </record>

        <!-- Add Workshop invoice form view invoice_supplier_form -->
        <record id="view_invoice_inh_form_app" model="ir.ui.view">
            <field name="name">view.account.move.inh.form.app.inherited1</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <data>

                    <field name="user_id" position="after">
                        <field name="workshop_id" attrs="{'invisible':[('workshop_id','=',False)]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                    </field>
                </data>
            </field>
        </record>


        <!-- Add Workshop payment form view -->
        <record id="view_payment_inh_form_app" model="ir.ui.view">
            <field name="name">view.account.payment.inh.form.app.inherited1</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_form"/>
            <field name="arch" type="xml">
                <data>
                    <field name="communication" position="after">
                        <field name="workshop_id" attrs="{'invisible':[('workshop_id','=',False)]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                        <field name="invoice_id" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                    </field>
                </data>
            </field>
        </record>


        <!-- Add Workshop payment form view -->
        <record id="view_payment_inh_bb_form_app" model="ir.ui.view">
            <field name="name">view.account.payment.inh.bb.form.app.inherited1</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_invoice_form"/>
            <field name="arch" type="xml">
                <data>
                    <field name="state" position="after">
                        <field name="workshop_id" attrs="{'invisible':[('workshop_id','=',False)]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                        <field name="invoice_id" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                    </field>
                </data>
            </field>
        </record>


        <!-- Add Workshop picking form view -->
        <record id="view_picking_inh_form_app" model="ir.ui.view">
            <field name="name">view.stock.picking.inh.form.app.inherited1</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <data>
                    <field name="date_done" position="after">
                        <field name="workshop_id" attrs="{'invisible':[('workshop_id','=',False)]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                        <field name="spare_order_id" attrs="{'invisible':[('spare_order_id','=',False)]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                    </field>
                </data>
            </field>
        </record>


        <!-- Add attash on partner form view -->
        <record id="view_partners_form_workshop_app" model="ir.ui.view">
            <field name="name">view.res.partner.form.app_workshop.inherited1</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <data>
                    <page name="internal_notes" position="after">
                        <page name="add_app_workshop" string="Addional">
                            <group colspan="4">
                                <field name="number_partner" nolabel="1"/>
                                <separator string="Workshop Order List" colspan="4"/>
                                <field name="workshop_ids" colspan="4" nolabel="1"/>
                            </group>
                        </page>
                    </page>
                </data>
            </field>
        </record>


        <!-- ################################################################################################################## -->
        <!-- #####################  create view and action and menu for appointments  ############################## -->
        <!-- ################################################################################################################## -->



        <record id="app_workshop_appointment_search_view" model="ir.ui.view">
            <field name="name">view.app_workshop_appointments.search</field>
            <field name="model">app.workshop.appointments</field>
            <field name="arch" type="xml">
                <search string="Appointments">
                    <field name="phone"/>
                    <field name="by_name"/>
                    <field name="partner_id"/>
                    <field name="vehicle_id"/>
                    <field name="brand_id"/>
                    <field name="model_id"/>
                    <field name="vin_sn"/>
                    <field name="license_plate"/>
                    <field name="date"/>
                    <field name="workshop_id"/>
                    <field name="c_note"/>
                    <field name="state"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter name="group_state" string="Status" domain="[]" context="{'group_by':'state'}"/>
                        <filter name="group_vehicle" string="Vehicle" domain="[]" context="{'group_by':'vehicle_id'}"/>
                        <filter name="group_partner" string="Customer" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter name="group_brand" string="Brand" domain="[]" context="{'group_by':'brand_id'}"/>
                        <filter name="group_date" string="Date" domain="[]" context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="app_view_app_workshop_appointment_kanban" model="ir.ui.view">
            <field name="name">view_app_workshop_appointment.kanban</field>
            <field name="model">app.workshop.appointments</field>
            <field name="arch" type="xml">
                <kanban string="Appointments" default_group_by="state" edit="0" create="0">
                    <field name="id"/>
                    <field name="phone"/>
                    <field name="by_name"/>
                    <field name="partner_id"/>
                    <field name="vehicle_id"/>
                    <field name="brand_id"/>
                    <field name="model_id"/>
                    <field name="vin_sn"/>
                    <field name="license_plate"/>
                    <field name="date"/>
                    <field name="workshop_id"/>
                    <field name="c_note"/>
                    <field name="state"/>
                    <templates>
                        <t t-name="kanban-box">
                        <div class="oe_kanban_card">
                            <div class="oe_kanban_details">
                                <strong>
                                    <a type="open">
                                        <field name="partner_id"/>
                                    </a>
                                </strong>
                                <ul>
                                    <li><field name="vehicle_id"/></li>
                                    <li><b><field name="brand_id"/></b></li>
                                    <li><b><field name="by_name"/></b></li>
                                    <li><b><field name="phone"/></b></li>
                                    <li>Date :<field name="date"/></li>
                                </ul>
                            </div>
                        </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="app_workshop_appointments_view_form" model="ir.ui.view">
            <field name="name">app.workshop.appointments.Form</field>
            <field name="model">app.workshop.appointments</field>
            <field name="arch" type="xml">
                <form string="Appointments">
                    <header>
                        <field name="id" invisible="1"/>
                        <!-- <button name="set_draft" type="object" string="Set Draft" states="done" groups="app_workshop.group_app_workshop_order_dep"/> -->
                        <button name="set_confirm" type="object" string="Confirm" states="draft" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                        <button name="set_order" type="object" string="Convert To Work-Order" states="confirm" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                        <button name="set_cancel" type="object" string="Cancel" states="draft,confirm" groups="app_workshop.group_app_workshop_order_dep"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirm,order,cancel"/>
                    </header>
                    <sheet>
                        <group>
                            <group string="Vehicle">
                                <field name="vehicle_id" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                                <field name="brand_id"/>
                                <field name="model_id"/>
                                <field name="vin_sn"/>
                                <field name="license_plate"/>
                            </group>
                            <group string="Information">
                                <field name="partner_id"/>
                                <field name="by_name" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                                <field name="phone" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                                <field name="date" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                            </group>
                        </group>
                        <notebook>
                            <page name="customer_note" string="Customer Notes">
                                <group colspan="4">
                                    <field name="c_note" nolabel="1" colspan="4" attrs="{'readonly': [('state','not in',('draft'))]}"/>
                                </group>
                            </page>
                            <page name="work_order" string="Workshop Order" attrs="{'invisible': [('workshop_id','=',False)]}">
                                <group colspan="4">
                                    <field name="workshop_id" attrs="{'invisible': [('workshop_id','=',False)]}" readonly="1"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="app_workshop_appointments_view_tree" model="ir.ui.view">
            <field name="name">app.workshop_appointments.Tree</field>
            <field name="model">app.workshop.appointments</field>
            <field name="arch" type="xml">
                <tree string="Appointments">
                    <field name="partner_id"/>
                    <field name="by_name"/>
                    <field name="phone"/>
                    <field name="date"/>
                    <field name="vehicle_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="open_app_workshop_appointments_view" model="ir.actions.act_window">
            <field name="name">Appointments</field>
            <field name="res_model">app.workshop.appointments</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_id" ref="app_workshop_appointments_view_tree"/>
        </record>

        <record id="open_app_workshop_appointments_done_view" model="ir.actions.act_window">
            <field name="name">Confirmed Appointments</field>
            <field name="res_model">app.workshop.appointments</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('state','=','done')]</field>
            <field name="view_id" ref="app_workshop_appointments_view_tree"/>
        </record>

        <record id="open_app_workshop_appointments_order_view" model="ir.actions.act_window">
            <field name="name">Work-Order Appointments</field>
            <field name="res_model">app.workshop.appointments</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('state','=','order')]</field>
            <field name="view_id" ref="app_workshop_appointments_view_tree"/>
        </record>





        <!-- ################################################################################################################## -->
        <!-- #####################  create view and action and menu for workshop order  ############################## -->
        <!-- ################################################################################################################## -->


        <record id="app_workshop_search_view" model="ir.ui.view">
            <field name="name">view.app_workshop.search</field>
            <field name="model">app.workshop</field>
            <field name="arch" type="xml">
                <search string="Work-Order">
                    <field name="no"/>
                    <field name="type_id"/>
                    <field name="service_advisor"/>
                    <field name="partner_id"/>
                    <field name="vehicle_id"/>
                    <field name="brand_id"/>
                    <field name="license_plate"/>
                    <field name="date_dua"/>
                    <field name="date_in"/>
                    <field name="date_out"/>
                    <field name="stage_id"/>
                    <field name="cust_inv"/>
                    <field name="cust_pay"/>
                    <field name="cust_mergin"/>
                    <field name="state"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter name="group_state" string="Status" domain="[]" context="{'group_by':'state'}"/>
                        <filter name="group_vehicle" string="Vehicle" domain="[]" context="{'group_by':'vehicle_id'}"/>
                        <filter name="group_partner" string="Customer" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter name="group_service_advisor" string="Service Advisor" domain="[]" context="{'group_by':'service_advisor'}"/>
                        <filter name="group_brand" string="Brand" domain="[]" context="{'group_by':'brand_id'}"/>
                        <filter name="group_type" string="Type" domain="[]" context="{'group_by':'type_id'}"/>
                        <filter name="group_payment_type" string="Payment Type" domain="[]" context="{'group_by':'payment_type'}"/>
                        <filter name="group_date_dua" string="Date Due" domain="[]" context="{'group_by':'date_dua'}"/>
                        <filter name="group_date_in" string="Working Date" domain="[]" context="{'group_by':'date_in'}"/>
                        <filter name="group_date_out" string="Delivery Date" domain="[]" context="{'group_by':'date_out'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="app_view_app_workshop_kanban" model="ir.ui.view">
            <field name="name">view_app_workshop.kanban</field>
            <field name="model">app.workshop</field>
            <field name="arch" type="xml">
                <kanban string="Work-Order" default_group_by="stage_id" edit="0" create="0">
                    <field name="id"/>
                    <field name="no"/>
                    <field name="vehicle_id"/>
                    <field name="type_id"/>
                    <field name="date_dua"/>
                    <field name="stage_id"/>
                    <field name="state"/>
                    <templates>
                        <t t-name="kanban-box">
                        <div class="oe_kanban_card">
                            <div class="oe_kanban_details">
                                <strong>
                                    <a type="open">
                                        <field name="no"/>
                                    </a>
                                </strong>
                                <ul>
                                    <li><field name="vehicle_id"/></li>
                                    <li><b><field name="type_id"/></b></li>
                                    <li>Date :<field name="date_dua"/></li>
                                </ul>
                            </div>
                        </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="pivot_app_workorder_view" model="ir.ui.view">
            <field name="name">app.workorder.pivot.view</field>
            <field name="model">app.workshop</field>
            <field name="arch" type="xml">
                <pivot string="Work-Order">
                    <field name="state" type="row"/>
                    <field name="date_dua" type="col"/>
                </pivot>
            </field>
        </record>


        <record id="app_view_app_workshop_form" model="ir.ui.view">
            <field name="name">app.workshop.form</field>
            <field name="model">app.workshop</field>
            <field name="priority">3</field>
            <field name="arch" type="xml">
                <form string="Work-Order">
                <header>
                    <field name="id" invisible="1"/>
                    <button name="set_wk_draft" type="object" string="Set Draft" states="cancel" groups="app_workshop.group_app_workshop_order_dep"/>
                    <button name="set_wk_in_work" type="object" string="Set Working" states="draft" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                    <button name="set_wk_done" type="object" string="Set Done" states="in_work" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                    <button name="set_wk_cancel" type="object" string="Set Cancel" states="in_work" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                    <button name="get_mergin_account" type="object" string="Update Data" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep" attrs="{'invisible': [('invoice_ids','=',[])]}"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,in_work,done,cancel"/>
                    <!-- <field name="stage_id" widget="statusbar" options="{'clickable': '1'}"/> -->
                </header>
                <header>
                    <field name="stage_id" widget="statusbar" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True,'clickable': '1'}"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="%(app_workshop.action_app_workshop_cust_inv_view)d"
                            string="Invoice "
                            type="action"
                            class="oe_stat_button"
                            groups="app_workshop.group_app_workshop_order_dep"
                            icon="fa-pencil-square-o"/>
                        <button name="%(app_workshop.action_app_workshop_cust_pay_view)d"
                            string="Payment "
                            type="action"
                            class="oe_stat_button"
                            groups="app_workshop.group_app_workshop_order_dep"
                            icon="fa-pencil-square-o"/>
                        <button name="%(app_workshop.action_open_app_service_view)d"
                            string="Service Task"
                            type="action"
                            class="oe_stat_button"
                            groups="app_workshop.group_app_workshop_order_dep"
                            icon="fa-pencil-square-o"/>
                        <button name="%(app_workshop.action_open_app_spare_view)d"
                            string="Spare Order"
                            type="action"
                            class="oe_stat_button"
                            groups="app_workshop.group_app_workshop_order_dep"
                            icon="fa-pencil-square-o"/>
                        <button name="%(app_workshop.action_open_app_picking_view)d"
                            string="Picking List"
                            type="action"
                            class="oe_stat_button"
                            groups="app_workshop.group_app_workshop_order_dep"
                            icon="fa-pencil-square-o"/>
                        <!-- <button name="%(app_workshop.action_open_app_backorder_view)d"
                            string="Back-Orders"
                            type="action"
                            class="oe_stat_button"
                            groups="app_workshop.group_app_workshop_order_dep"
                            icon="fa-pencil-square-o"/> -->
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="no" readonly="1"/>
                        </h1>
                    </div>
                    <group col="4">
                        <field name="type_id" required="1" attrs="{'readonly': [('state', 'not in', ('draft'))]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                        <field name="service_advisor" required="1" attrs="{'readonly': [('state', 'not in', ('draft'))]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                        <field name="payment_type" required="1" attrs="{'readonly': [('state', 'not in', ('draft'))]}"/>
                        <field name="parent_id" attrs="{'invisible': [('parent_id','=',False)]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                    </group>
                    <group>
                        <group string="General" attrs="{'readonly': [('state', 'not in', ('draft'))]}">
                            <field name="by_name" attrs="{'readonly': [('state', 'not in', ('draft'))]}"/>
                            <field name="phone" attrs="{'readonly': [('state', 'not in', ('draft'))]}"/>
                            <field name="barcode"/>
                        </group>
                        <group string="Date" attrs="{'readonly': [('state', 'not in', ('draft'))]}">
                            <field name="date_dua" attrs="{'readonly': [('state', 'not in', ('draft'))]}"/>
                            <field name="date_in" readonly="1"/>
                            <field name="date_out" readonly="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Information" name="workshop_info">
                            <group colspan="4">
                                <field name="vehicle_id" attrs="{'readonly': [('state', 'not in', ('draft'))]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                                <field name="parent_id" attrs="{'invisible': [('parent_id', '=',False)]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                            </group>
                            <group col="4">
                                <field name="partner_id"/>
                                <field name="brand_id"/>
                                <field name="license_plate"/>
                                <field name="vin_sn"/>
                            </group>
                            <group colspan="4">
                                <field name="odometer" attrs="{'readonly': [('state', 'not in', ('draft'))]}"/>
                                <button name="update_odometer_fleet" type="object" string="Update Odometer(KM)" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep" attrs="{'invisible': [('odometer','=',False)]}"/>
                            </group>
                        </page>
                        <page string="Notes" name="workshop_order_note">
                            <field name="order_spare_ids" attrs="{'readonly': [('state', 'not in', ('draft','in_work'))]}" context="{'default_workshop_id':id}"/>
                        </page>
                        <page string="Spare Order" name="workshop_order_spare">
                            <group string="Customer Notes" colspan="4">
                                <field name="c_note" attrs="{'readonly': [('state', 'not in', ('draft'))]}"/>
                            </group>
                            <group string="Technical Advisor Notes" colspan="4">
                                <field name="t_note" attrs="{'readonly': [('state', 'not in', ('draft'))]}"/>
                            </group>
                        </page>
                        <page string="Spare Parts" name="workshop_spare" attrs="{'invisible':[('state','=','draft')]}">
                            <field name="spare_ids" context="{'default_workshop_id':id}" readonly="1" nolabel="1" colspan="4">
                                <tree string="Spare" editable="bottom">
                                    <field name="name"/>
                                    <field name="product_id" context="{'default_type':'product'}" domain="[('type','=','product')]" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                                    <field name="qty"/>
                                    <field name="price"/>
                                    <field name="workshop_id" invisible="1"/>
                                    <field name="state" readonly="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Service Task" name="workshop_service">
                            <field name="line_ids" context="{'default_workshop_id':id}" attrs="{'readonly': [('state', 'not in', ('draft','in_work'))]}" nolabel="1" colspan="4">
                                <tree string="Service Task" editable="bottom">
                                    <field name="name"/>
                                    <field name="product_id" context="{'default_type':'service'}" domain="[('type','=','service')]" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                                    <field name="qty" invisible="1"/>
                                    <field name="price"/>
                                    <field name="workshop_id" invisible="1"/>
                                    <field name="state" readonly="1"/>
                                    <button name="set_done" type="object" string="Set Done" states="draft" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Accounting" name="workshop_account">
                            <table class="table table-condensed table-bordered table-bordered">
                                <tr>
                                    <td><b>#</b></td>
                                    <td><b>Customer Invoice (Receivable)</b></td>
                                </tr>
                                <tr>
                                    <td><b>Expected Bills</b></td>
                                    <td><b><field name="cust_inv"/></b></td>
                                </tr>
                                <tr>
                                    <td><b>Actual Payment</b></td>
                                    <td><b><field name="cust_pay"/></b></td>
                                </tr>
                                <tr>
                                    <td><b>Amounts Due</b></td>
                                    <td><b><field name="cust_mergin"/></b></td>
                                </tr>
                            </table>
                            <group invisible="1" colspan="4">
                                <field name="invoice_ids" invisible="1"/>
                                <field name="payment_ids" invisible="1"/>
                            </group>
                        </page>
                        <page string="Remarks" name="workshop_note">
                            <group colspan="4">
                                <field name="note" nolabel="1"/>
                            </group>
                        </page>
                    </notebook>
                    <div class="oe_clear"/>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>


        <record id="app_workshop_view_tree" model="ir.ui.view">
            <field name="name">workshop.app.tree</field>
            <field name="model">app.workshop</field>
            <field name="arch" type="xml">
                <tree string="Work-Order">
                    <field name="no"/>
                    <field name="type_id"/>
                    <field name="partner_id"/>
                    <field name="vehicle_id"/>
                    <field name="brand_id"/>
                    <field name="license_plate"/>
                    <field name="date_dua"/>
                    <field name="date_in"/>
                    <field name="date_out"/>
                    <field name="stage_id"/>
                    <field name="cust_inv" sum="cust_inv"/>
                    <field name="cust_pay" sum="cust_pay"/>
                    <field name="cust_mergin" sum="cust_mergin"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="action_app_workshop_view" model="ir.actions.act_window">
            <field name="name">Work-Order</field>
            <field name="res_model">app.workshop</field>
            <field name="view_id" ref="app_workshop_view_tree"/>
            <field name="view_mode">kanban,tree,form,pivot</field>
        </record>

        <record id="action_app_workshop_draft_view" model="ir.actions.act_window">
            <field name="name">Draft</field>
            <field name="res_model">app.workshop</field>
            <field name="view_id" ref="app_workshop_view_tree"/>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','draft')]</field>
        </record>

        <record id="action_app_workshop_in_work_view" model="ir.actions.act_window">
            <field name="name">In Working</field>
            <field name="res_model">app.workshop</field>
            <field name="view_id" ref="app_workshop_view_tree"/>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','in_work')]</field>
        </record>

        <record id="action_app_workshop_done_view" model="ir.actions.act_window">
            <field name="name">Done</field>
            <field name="res_model">app.workshop</field>
            <field name="view_id" ref="app_workshop_view_tree"/>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','done')]</field>
        </record>

        <record id="action_app_workshop_follow_view" model="ir.actions.act_window">
            <field name="name">Follow Up</field>
            <field name="res_model">app.workshop</field>
            <field name="view_id" ref="app_workshop_view_tree"/>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','follow')]</field>
        </record>

        <record id="action_app_workshop_cancel_view" model="ir.actions.act_window">
            <field name="name">Cancel</field>
            <field name="res_model">app.workshop</field>
            <field name="view_id" ref="app_workshop_view_tree"/>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','cancel')]</field>
        </record>

        <record id="action_app_item_service_view" model="ir.actions.act_window">
            <field name="name">Service Item</field>
            <field name="res_model">product.product</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'default_type':'service'}</field>
            <field name="domain">[('type','=','service')]</field>
        </record>

        <record id="action_app_item_product_view" model="ir.actions.act_window">
            <field name="name">Spare Parts</field>
            <field name="res_model">product.product</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'default_type':'product'}</field>
            <field name="domain">[('type','=','product')]</field>
        </record>


        <record id="app_workshop_type_view_tree" model="ir.ui.view">
            <field name="name">type.workshop.app.tree</field>
            <field name="model">app.workshop.type</field>
            <field name="arch" type="xml">
                <tree string="Workshop Type" editable="top">
                    <field name="name"/>
                    <field name="customer_pick_type"/>
                    <field name="vendor_pick_type"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>

        <record id="action_app_workshop_type_view" model="ir.actions.act_window">
            <field name="name">Workshop Type</field>
            <field name="res_model">app.workshop.type</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="app_workshop_type_view_tree"/>
        </record>


        <record id="app_workshop_stage_view_tree" model="ir.ui.view">
            <field name="name">stage.workshop.app.tree</field>
            <field name="model">app.workshop.stage</field>
            <field name="arch" type="xml">
                <tree string="Workshop Stage" editable="top">
                    <field name="name"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>

        <record id="action_app_workshop_stage_view" model="ir.actions.act_window">
            <field name="name">Workshop Stage</field>
            <field name="res_model">app.workshop.stage</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="app_workshop_stage_view_tree"/>
        </record>

        <menuitem id="app_workshop_root_order_menu"
            name="Workshop Managment"
            sequence="1" web_icon="app_workshop,static/description/icon.png" 
            groups="app_workshop.group_app_workshop_dev"/>

        <menuitem id="app_dd_workshop_menu"
            name="Work-Order"
            parent="app_workshop.app_workshop_root_order_menu"
            action="app_workshop.action_app_workshop_view"
            sequence="2" groups="app_workshop.group_app_workshop_dev"/>

        <menuitem id="app_data_workshop_state_menu"
            name="Work-Order Status"
            parent="app_workshop.app_workshop_root_order_menu"
            sequence="6" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_menu_workshop_draft_menu"
            name="Draft"
            parent="app_data_workshop_state_menu"
            action="action_app_workshop_draft_view"
            sequence="5" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_menu_workshop_working_menu"
            name="In Working"
            parent="app_data_workshop_state_menu"
            action="action_app_workshop_in_work_view"
            sequence="6" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_menu_workshop_done_menu"
            name="Done"
            parent="app_data_workshop_state_menu"
            action="action_app_workshop_done_view"
            sequence="7" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_menu_workshop_done_menu"
            name="Cancel"
            parent="app_data_workshop_state_menu"
            action="action_app_workshop_cancel_view"
            sequence="9" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_menu_workshop_follow_menu"
            name="Follow Up"
            parent="app_data_workshop_state_menu"
            action="action_app_workshop_follow_view"
            sequence="10" groups="app_workshop.group_app_workshop_order_dep"/>





        <menuitem  id="menu_workshop_appointments_work" parent="app_workshop.app_workshop_root_order_menu" groups="app_workshop.group_app_workshop_order_dep" name="Appointments Workshop" sequence="1"/>


        <menuitem  id="menu_workshop_appointments_order" parent="menu_workshop_appointments_work" groups="app_workshop.group_app_workshop_order_dep" action="open_app_workshop_appointments_view" name="Appointments" sequence="5"/>


        <menuitem  id="menu_workshop_appointments_done" parent="menu_workshop_appointments_work" groups="app_workshop.group_app_workshop_order_dep" action="open_app_workshop_appointments_done_view" name="Confirmed Appointments" sequence="7"/>


        <menuitem  id="menu_workshop_appointments_workshop" parent="menu_workshop_appointments_work" groups="app_workshop.group_app_workshop_order_dep" action="open_app_workshop_appointments_order_view" name="Work-Order Appointments" sequence="9"/>

        



        <menuitem id="app_data_workshop_menu"
            name="Configuration"
            parent="app_workshop_root_order_menu"
            sequence="99" groups="app_workshop.group_app_workshop_order_dep"/>


        <menuitem id="menu_workshop_stage_app"
            name="Workshop Stage"
            action="action_app_workshop_stage_view"
            parent="app_data_workshop_menu"
            sequence="11" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="menu_workshop_type_app"
            name="Workshop Type"
            action="action_app_workshop_type_view"
            parent="app_data_workshop_menu"
            sequence="13" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="menu_workshop_fleet_app"
            name="Fleet"
            action="fleet.fleet_vehicle_action"
            parent="app_data_workshop_menu"
            sequence="14" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="menu_workshop_fleet_model_app"
            name="Fleet Model"
            action="fleet.fleet_vehicle_model_action"
            parent="app_data_workshop_menu"
            sequence="15" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="menu_workshop_fleet_brand_app"
            name="Fleet Brand"
            action="fleet.fleet_vehicle_model_brand_action"
            parent="app_data_workshop_menu"
            sequence="16" groups="app_workshop.group_app_workshop_order_dep"/>


        <menuitem id="menu_workshop_it_product_app"
            name="Spare Item"
            action="action_app_item_product_view"
            parent="app_data_workshop_menu"
            sequence="17" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="menu_workshop_it_serv_app"
            name="Service Item"
            action="action_app_item_service_view"
            parent="app_data_workshop_menu"
            sequence="19" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="menu_workshop_cust_app"
            name="Customer"
            action="base.action_partner_form"
            parent="app_data_workshop_menu"
            sequence="26" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="menu_workshop_vender_app"
            name="Vendor"
            action="base.action_partner_supplier_form"
            parent="app_data_workshop_menu"
            sequence="29" groups="app_workshop.group_app_workshop_order_dep"/>



        <menuitem id="app_line_workshop_menu"
            name="Line Of Workshop"
            parent="app_workshop_root_order_menu"
            sequence="16" groups="app_workshop.group_app_workshop_order_dep"/>



        <menuitem id="app_data_inv_pay_menu"
            name="Invoices And Payments"
            parent="app_workshop_root_order_menu"
            sequence="18" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_data_inv_menu"
            name="Invoices"
            parent="app_data_inv_pay_menu"
            sequence="3" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_data_inv_cus_menu"
            name="Customer Invoice"
            parent="app_data_inv_menu"
            action="account.action_move_out_invoice_type"
            sequence="3" groups="app_workshop.group_app_workshop_order_dep"/>

        <!-- <menuitem id="app_data_inv_vender_menu"
            name="Vendor Invoice"
            parent="app_data_inv_menu"
            action="account.action_vendor_bill_template"
            sequence="6" groups="app_workshop.group_app_workshop_order_dep"/> -->

        <menuitem id="app_data_pay_menu"
            name="Payments"
            parent="app_data_inv_pay_menu"
            sequence="6" groups="app_workshop.group_app_workshop_order_dep"/>

        <menuitem id="app_data_pay_cus_menu"
            name="Customer Payments"
            parent="app_data_pay_menu"
            action="account.action_account_payments"
            sequence="3" groups="app_workshop.group_app_workshop_order_dep"/>

        <!-- <menuitem id="app_data_pay_vender_menu"
            name="Vendor Payments"
            parent="app_data_pay_menu"
            action="account.action_account_payments_payable"
            sequence="6" groups="app_workshop.group_app_workshop_order_dep"/> -->


        <!-- ################################################################################################################## -->
        <!-- #####################  create view and action and menu for Service  ############################## -->
        <!-- ################################################################################################################## -->

        <record id="app_workshop_service_view_form" model="ir.ui.view">
            <field name="name">app.workshop.service.Form</field>
            <field name="model">app.workshop.line</field>
            <field name="arch" type="xml">
                <form string="Service Task">
                    <header>
                        <field name="id" invisible="1"/>
                        <!-- <button name="set_draft" type="object" string="Set Draft" states="done" groups="app_workshop.group_app_workshop_order_dep"/> -->
                        <button name="set_cancel" type="object" string="Cancel" states="draft" groups="app_workshop.group_app_workshop_order_dep"/>
                        <button name="set_start" type="object" string="Start" states="draft,puase" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                        <button name="set_puase" type="object" string="Puase" states="start" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                        <button name="set_done" type="object" string="Set Done" states="start" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,start,puase,done,cancel"/>
                    </header>
                    <sheet>
                        <group colspan="4">
                            <field name="name" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}"/>
                        </group>
                        <group col="4">
                            <field name="product_id" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                            <field name="workshop_id" domain="[('state', 'in', ('draft','in_work'))]" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}" required="1"/>
                            <field name="price" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}"/>
                            <field name="employee_id" required="1" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                            <field name="wk_state" invisible="1"/>
                        </group>
                        <group col="4">
                            <field name="product_tmpl_id"/>
                            <field name="date_start"/>
                            <field name="stander_time"/>
                            <field name="date_end"/>
                            <field name="service_time"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="app_workshop_service_view_tree" model="ir.ui.view">
            <field name="name">app.workshop_service.Tree</field>
            <field name="model">app.workshop.line</field>
            <field name="arch" type="xml">
                <tree string="Service Task">
                    <field name="workshop_id"/>
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="price"/>
                    <field name="employee_id"/>
                </tree>
            </field>
        </record>

        <record id="open_app_workshop_service_view" model="ir.actions.act_window">
            <field name="name">Service Task</field>
            <field name="res_model">app.workshop.line</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="app_workshop_service_view_tree"/>
        </record>


        <menuitem  id="menu_workshop_service_order" parent="app_line_workshop_menu" groups="app_workshop.group_app_workshop_order_dep" action="open_app_workshop_service_view" name="Service Task" sequence="5"/>


        <!-- ################################################################################################################## -->
        <!-- #####################  create view and action and menu for Spare Order  ############################## -->
        <!-- ################################################################################################################## -->

        <record id="app_workshop_spare_order_view_form" model="ir.ui.view">
            <field name="name">app.workshop.spare.order.Form</field>
            <field name="model">app.workshop.spare.order</field>
            <field name="arch" type="xml">
                <form string="Spare Order">
                    <header>
                        <field name="id" invisible="1"/>
                        <!-- <button name="set_draft" type="object" string="Set Draft" states="done" groups="app_workshop.group_app_workshop_order_dep"/> -->
                        <button name="set_cancel" type="object" string="Cancel" states="draft" groups="app_workshop.group_app_workshop_order_dep"/>
                        <button name="set_done" type="object" string="Set Done" states="draft" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,done,cancel"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="no" readonly="1"/>
                            </h1>
                        </div>
                        <group col="4">
                            <field name="workshop_id" domain="[('state', 'in', ('draft','in_work'))]" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}" options="{'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                            <field name="type_id" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}"/>
                            <field name="pick_id" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}"/>
                            <field name="wk_state" invisible="1"/>
                        </group>
                        <group colspan="4">
                            <field name="date" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}"/>
                        </group>
                        <group colspan="4">
                            <field name="spare_ids" nolabel="1" attrs="{'readonly': ['|',('state','not in',('draft')),('wk_state', 'not in', ('draft','in_work'))]}" context="{'default_spare_order_id':id}">
                                <tree string="Spare List" editable="bottom">
                                    <field name="workshop_id" invisible="1"/>
                                    <field name="spare_order_id" invisible="1"/>
                                    <field name="product_id"/>
                                    <field name="name"/>
                                    <field name="qty"/>
                                    <field name="price"/>
                                    <field name="pick_id" readonly="1"/>
                                    <field name="state" readonly="1"/>
                                </tree>
                            </field>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="app_workshop_spare_order_view_tree" model="ir.ui.view">
            <field name="name">app.workshop_spare.Tree</field>
            <field name="model">app.workshop.spare.order</field>
            <field name="arch" type="xml">
                <tree string="Spare Order">
                    <field name="no"/>
                    <field name="workshop_id"/>
                    <field name="type_id"/>
                    <field name="pick_id"/>
                    <field name="state"/>
                    <button name="set_done" type="object" string="Set Done" states="draft" class="oe_highlight" groups="app_workshop.group_app_workshop_order_dep"/>
                </tree>
            </field>
        </record>

        <record id="open_app_workshop_spare_order_view" model="ir.actions.act_window">
            <field name="name">Spare Order</field>
            <field name="res_model">app.workshop.spare.order</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="app_workshop_spare_order_view_tree"/>
        </record>


        <menuitem  id="menu_workshop_spare_order" parent="app_line_workshop_menu" groups="app_workshop.group_app_workshop_order_dep" action="open_app_workshop_spare_order_view" name="Spare Order" sequence="7"/>
 
</odoo>
