<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="portal_home" name="Home">
            <t t-call="employee_portal_service.employee_portal_layout">
                <div class="pcoded-inner-content">
                    <!-- Main-body start -->
                    <div class="main-body text-left">
                        <div class="page-wrapper">
                            <!-- Page body start -->
                            <div class="page-body">
                                <div name="smart_card_info" class="row">
                                    <div class="col-xl-3 col-md-6" name="contract_box">
                                        <div class="card bg-c-lite-green update-card">
                                            <div class="card-block">
                                                <div class="row align-items-end">
                                                    <div class="col-8">
                                                        <h4 class="text-white"><span t-esc="smart_button['num_contract']"/></h4>
                                                        <h6 class="text-white m-b-0">My Contract
                                                        </h6>
                                                    </div>
                                                    <div class="col-4 text-left">
                                                        <div class="chartjs-size-monitor">
                                                            <div class="chartjs-size-monitor-expand">
                                                                <div class=""></div>
                                                            </div>
                                                            <div class="chartjs-size-monitor-shrink">
                                                                <div class=""></div>
                                                            </div>
                                                        </div>
                                                        <canvas id="update-chart-4" height="100"
                                                                width="156"
                                                                class="chartjs-render-monitor"
                                                                style="display: block; width: 78px; height: 50px;"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--<div class="card-footer">
                                                <p class="text-white m-b-0">
                                                    <i class="feather icon-clock text-white f-14 m-r-10"/>
                                                    Last assignment
                                                    :
                                                </p>
                                            </div>-->
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6" name="leave_box">
                                        <div class="card bg-c-yellow update-card">
                                            <div class="card-block">
                                                <div class="row align-items-end">
                                                    <div class="col-8">
                                                        <h4 class="text-white"><span t-esc="smart_button['leaves_balance']"/></h4>
                                                        <h6 class="text-white m-b-0">My holidays
                                                        </h6>
                                                    </div>
                                                    <div class="col-4 text-left">
                                                        <div class="chartjs-size-monitor">
                                                            <div class="chartjs-size-monitor-expand">
                                                                <div class=""></div>
                                                            </div>
                                                            <div class="chartjs-size-monitor-shrink">
                                                                <div class=""></div>
                                                            </div>
                                                        </div>
                                                        <canvas id="update-chart-1" height="100"
                                                                style="display: block; width: 78px; height: 50px;"
                                                                width="156"
                                                                class="chartjs-render-monitor"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--<div class="card-footer">
                                                <p class="text-white m-b-0">
                                                    <i
                                                            class="feather icon-clock text-white f-14 m-r-10"/>
                                                    Last updated
                                                    :
                                                </p>
                                            </div>-->
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6" name="my_req_box">
                                        <div class="card bg-c-green update-card">
                                            <div class="card-block">
                                                <div class="row align-items-end">
                                                    <div class="col-8">
                                                        <h4 class="text-white"><span t-esc="smart_button['req_follow']"/></h4>
                                                        <h6 class="text-white m-b-0">My requests
                                                        </h6>
                                                    </div>
                                                    <div class="col-4 text-left">
                                                        <div class="chartjs-size-monitor">
                                                            <div class="chartjs-size-monitor-expand">
                                                                <div class=""></div>
                                                            </div>
                                                            <div class="chartjs-size-monitor-shrink">
                                                                <div class=""></div>
                                                            </div>
                                                        </div>
                                                        <canvas id="update-chart-2" height="100"
                                                                width="156"
                                                                class="chartjs-render-monitor"
                                                                style="display: block; width: 78px; height: 50px;"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--<div class="card-footer">
                                                <p class="text-white m-b-0">
                                                    <i class="feather icon-clock text-white f-14 m-r-10"/>
                                                    Last request
                                                    :
                                                </p>
                                            </div>-->
                                        </div>
                                    </div>
                                    <div class="col-xl-3 col-md-6" name="approve_req_box">
                                        <div class="card bg-c-pink update-card">
                                            <div class="card-block">
                                                <div class="row align-items-end">
                                                    <div class="col-8">
                                                        <h4 class="text-white"><span t-esc="smart_button['req_validate']"/></h4>
                                                        <h6 class="text-white m-b-0">To Approve</h6>
                                                    </div>
                                                    <div class="col-4 text-left">
                                                        <div class="chartjs-size-monitor">
                                                            <div class="chartjs-size-monitor-expand">
                                                                <div class=""></div>
                                                            </div>
                                                            <div class="chartjs-size-monitor-shrink">
                                                                <div class=""></div>
                                                            </div>
                                                        </div>
                                                        <canvas id="update-chart-3" height="100"
                                                                width="156"
                                                                class="chartjs-render-monitor"
                                                                style="display: block; width: 78px; height: 50px;"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--<div class="card-footer">
                                                <p class="text-white m-b-0">
                                                    <i class="feather icon-clock text-white f-14 m-r-10"/>
                                                    Last cycle
                                                    :
                                                </p>
                                            </div>-->
                                        </div>
                                    </div>
                                </div>

                                <div name="empl_min_info" class="row">
                                    <div class="col-md-6">
                                        <div class="card user-card-full">
                                            <div class="row m-l-0 m-r-0">
                                                <div class="col-sm-4 bg-c-lite-green user-profile">
                                                    <div class="card-block text-center text-white">
                                                        <div class="m-b-25">
                                                            <img class="img-radius"
                                                                 t-att-src="website.sudo().image_url(employee, 'image_128')"
                                                                 alt="User-Profile-Image"/>
                                                        </div>
                                                        <h6 class="f-w-600" t-if="employee">
                                                            <t t-esc="employee.name"/>
                                                        </h6>
                                                        <p t-if="employee.department_id">
                                                            <t t-esc="employee.department_id.name"/>
                                                        </p>
                                                        <a href="/details/account" data-toggle="tooltip"
                                                           data-placement="bottom" title="Details">
                                                            <i class="feather icon-edit m-t-10 f-16 txt-wight"/>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="col-sm-8">
                                                    <div class="card-block">
                                                        <h6 class="m-b-20 p-b-5 b-b-default f-w-600">
                                                            Personal information
                                                        </h6>
                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <p class="m-b-10 f-w-600">E-mail</p>
                                                                <h6 class="text-muted f-w-400">
                                                                    <t t-esc="employee.work_email"/>
                                                                </h6>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <p class="m-b-10 f-w-600">Phone
                                                                    number
                                                                </p>
                                                                <h6 class="text-muted f-w-400">
                                                                    <t t-esc="employee.mobile_phone"/>
                                                                </h6>
                                                            </div>
                                                        </div>
                                                        <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600">
                                                            Professional information
                                                        </h6>
                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                                <p class="m-b-10 f-w-600">
                                                                    Administration
                                                                </p>
                                                                <h6 class="text-muted f-w-400" t-if="employee.department_id">
                                                                    <t t-esc="employee.department_id.name"/>
                                                                </h6>
                                                            </div>
                                                            <div class="col-sm-12">
                                                                <p class="m-b-10 f-w-600">Direct
                                                                    manager
                                                                </p>
                                                                <h6 class="text-muted f-w-400" t-if="employee.parent_id">
                                                                    <t t-esc="employee.parent_id.name"/>
                                                                </h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card user-activity-card scroll ">
                                            <div class="card-header">
                                                <h5>Latest news</h5>
                                            </div>
                                            <div class="card-block">
                                                <div class="row m-b-25" id="item_latest_news">
                                                    <div class="col-auto p-r-0">
                                                        <div class="u-img">
                                                            <img src="/employee_portal_service/static/files/assets/images/breadcrumb-bg.jpg"
                                                                 alt="user image"
                                                                 class="img-radius cover-img"/>
                                                            <img src="/employee_portal_service/static/files/assets/images/avatar-2.jpg"
                                                                 alt="user image"
                                                                 class="img-radius profile-img"/>
                                                        </div>
                                                    </div>
                                                    <div class="col">
                                                        <h6 class="m-b-5">Lorem Ipsum is simply</h6>
                                                        <p class="text-muted m-b-0">Lorem Ipsum is
                                                            simply dummy text of the printing and
                                                            typesetting industry...
                                                        </p>
                                                        <p class="text-muted m-b-0">2
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="text-center">
                                                    <a href="#!" class="b-b-primary text-primary" id="href_list_news">
                                                        All
                                                        news and circulars
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div name="transaction_info" class="row">
                                    <div class="col-md-6">
                                        <div class="card user-activity-card scroll">
                                            <div class="card-header">
                                                <h5>Follow-up Requests</h5>
                                            </div>
                                            <div class="card-block">
                                                <div class="row" id="transaction_follow">
                                                    <!--<table class="table rounded mb-0 bg-white table-responsive o_portal_my_doc_table common_datatable">-->
                                                    <t t-if="follow_transactions" t-call="portal.portal_table">
                                                        <thead>
                                                            <tr>
                                                                <th>NO</th>
                                                                <th>Name</th>
                                                                <th>Date</th>
                                                                <th>State</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <t t-foreach="follow_transactions" t-as="action">
                                                                <t t-set="temp_record_id" t-value="action['record_id']"/>
                                                                <t t-set="temp_model" t-value="action['model']"/>
                                                                <tr>
                                                                    <td>
                                                                        <a t-att-href="action['details_url'] if action['details_url'] else '#'">
                                                                            <t t-esc="action['number']"/>
                                                                        </a>
                                                                    </td>
                                                                    <td>
                                                                        <t t-esc="action['name']"/>
                                                                    </td>
                                                                    <td>
                                                                        <t t-esc="action['ddate']"/>
                                                                    </td>
                                                                    <td>
                                                                        <t t-if="action['state'] in ['draft', 'new']">
                                                                            <span
                                                                                    class="label label-warning"
                                                                                    t-esc="action['state_value']">
                                                                            </span>
                                                                        </t>
                                                                        <t t-if="action['state'] in ['done', 'finish', 'finished']">
                                                                            <span
                                                                                    class="label label-success"
                                                                                    t-esc="action['state_value']">
                                                                            </span>
                                                                        </t>
                                                                        <t t-if="action['state'] in ['refuse', 'refused','cancel','cancelled']">
                                                                            <span
                                                                                    class="label label-danger"
                                                                                    t-esc="action['state_value']">
                                                                            </span>
                                                                        </t>
                                                                        <t t-if="action['state'] not in ['refuse', 'refused','done', 'finish', 'finished','draft', 'new','cancel']">
                                                                            <span
                                                                                    class="label label-info"
                                                                                    t-esc="action['state_value']">
                                                                            </span>
                                                                        </t>
                                                                    </td>
                                                                </tr>
                                                            </t>
                                                        </tbody>
                                                    </t>
                                                    <!--</table>-->
                                                </div>
                                                <t t-if="follow_transactions">
                                                    <div class="card-footer">
                                                        <a href="/portal/transactions?filter_name=all&amp;transaction_type=follow" class="btn btn-default" title="">View All</a>
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card user-activity-card scroll ">
                                            <div class="card-header">
                                                <h5>To Approve</h5>
                                            </div>
                                            <div class="card-block">
                                                <div class="row" id="transaction_validate">
                                                    <!--<table class="table rounded mb-0 bg-white table-responsive o_portal_my_doc_table common_datatable">-->
                                                    <t t-if="validate_transactions" t-call="portal.portal_table">
                                                        <thead>
                                                            <tr>
                                                                <th>NO</th>
                                                                <th>Name</th>
                                                                <th>Date</th>
                                                                <th class="text-center">Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <t t-foreach="validate_transactions" t-as="action">
                                                                <t t-set="temp_record_id" t-value="action['record_id']"/>
                                                                <t t-set="temp_model" t-value="action['model']"/>
                                                                <tr>
                                                                    <td>
                                                                        <a t-att-href="action['details_url'] if action['details_url'] else '#'">
                                                                            <t t-esc="action['number']"/>
                                                                        </a>
                                                                    </td>
                                                                    <td>
                                                                        <t t-esc="action['name']"/>
                                                                    </td>
                                                                    <td>
                                                                        <t t-esc="action['ddate']"/>
                                                                    </td>
                                                                    <td class="text-left">
                                                                        <button type="button" id="transaction-accept-button"
                                                                                class="btn bg-success margin"
                                                                                data-toggle="modal"
                                                                                t-att-data-record="temp_record_id"
                                                                                t-att-data-model="temp_model">
                                                                                <i class="fa fa-check"></i>
                                                                                            Accept
                                                                        </button>

                                                                        <!-- those two hidden input will be filled each time refuse-alert-button is clicked -->
                                                                        <input type="hidden" id="record_id"
                                                                               name="record_id"/>
                                                                        <input type="hidden" id="model" name="model"/>
                                                                        <button type="button" id="refuse-alert-button"
                                                                                class="btn btn-danger margin"
                                                                                data-toggle="modal"
                                                                                t-att-data-record="temp_record_id"
                                                                                t-att-data-model="temp_model"
                                                                                data-target="#refuse-modal-alert">
                                                                                <i class="fa fa-ban"></i>
                                                                                         Reject
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            </t>
                                                        </tbody>
                                                    </t>
                                                    <!--</table>-->
                                                </div>
                                                <t t-if="validate_transactions">
                                                    <div class="card-footer">
                                                        <a href="/portal/transactions?filter_name=all&amp;transaction_type=validate" class="btn btn-default" title="">Veiw All</a>
                                                        <button id="accept-all-transactions" class="btn btn-primary">
                                                            <i class="fa fa-check"></i>Accept All
                                                        </button>
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Page body end -->
                        </div>
                    </div>
                    <!-- Main-body end -->
                </div>
            </t>
        </template>
    </data>
</odoo>
