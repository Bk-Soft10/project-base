<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="crmfront_dashboard" name="crm dashboard">
        <xpath expr="//t[@t-call='portal.portal_layout']" position="replace">
            <html lang="en">
                <t t-call="crmfront.crm_dashboard_head"></t>
                <body id="page-top">
                    <!-- Page Wrapper -->
                    <div id="wrapwrap">
                        <div id="wrapper">

                            <t t-call="crmfront.crm_dashboard_sidebar" />
                            <!-- Content Wrapper -->
                            <div id="content-wrapper" class="d-flex flex-column">
                                <!-- Main Content -->
                                <div id="content">

                                    <t t-call="crmfront.crm_dashboard_topbar" />

                                    <!-- Begin Page Content -->
                                    <div class="container-fluid">

                                        <!-- Page Heading -->
                                        <div class="d-sm-flex align-items-center justify-content-between mb-4">

                                            <h1 t-if="filterby == 'all'" class="h3 mb-0 text-gray-800">Dashboard</h1>
                                            <h1 t-if="filterby == '1'" style="color:#4e73df;" class="h3 mb-0  ">Pending  Customer Leads</h1>
                                            <h1 t-if="filterby == '2'" style="color:#F6931D;" class="h3 mb-0 ">In Progress Customer Leads</h1>
                                            <h1 t-if="filterby == '4'" style="color:#1cc88a;" class="h3 mb-0 ">Solved Customer Leads</h1>
                                            <h1 t-if="filterby == '5'" style="color:red;" class="h3 mb-0 ">Cancelled Customer Leads</h1>


                                            <form method="POST" t-attf-action="/new/lead">
                                                <button name="create_new_lead" type="action" class="d-sm-inline-block btn btn-sm btn-primary shadow-sm">New Leads</button>
                                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                            </form>
                                        </div>

                                        <!-- Content Row -->
                                        <div t-if="filterby == 'all' " class="row">

                                            <!-- Earnings (Monthly) Card Example -->

                                            <div onclick="pendingFunction()" style="cursor:pointer;" class="col-xl-3 col-md-3 mb-4">
                                                <div class="card border-left-primary shadow h-100 py-2">
                                                    <div class="card-body">
                                                        <div class="row no-gutters align-items-center">
                                                            <div class="col mr-2">
                                                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                                    <a href="/my/leads?filterby=1" class="text-primary">Pending Leads</a>

                                                                </div>
                                                                <div class="h5 mb-0 font-weight-bold text-gray-800">
                                                                    <t t-esc="new_lead_count" />
                                                                </div>
                                                            </div>
                                                            <div class="col-auto">
                                                                <i class="fas fa-comments fa-2x text-gray-300"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Earnings (Monthly) Card Example -->
                                            <div onclick="progressFunction()" style="cursor:pointer;" class="col-xl-3 col-md-3 mb-4">
                                                <div class="card border-left-warning shadow h-100 py-2">
                                                    <div class="card-body">
                                                        <div class="row no-gutters align-items-center">
                                                            <div class="col mr-2">
                                                                <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                                    <a href="/my/leads?filterby=2" class="text-warning">In Progress</a>
                                                                </div>
                                                                <div class="h5 mb-0 font-weight-bold text-gray-800">
                                                                    <t t-esc="progress_lead_count" />
                                                                </div>
                                                            </div>
                                                            <div class="col-auto">
                                                                <i class="fas fa-comments fa-2x text-gray-300"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Earnings (Monthly) Card Example -->
                                            <div onclick="doneFunction()" style="cursor:pointer;" class="col-xl-3 col-md-3 mb-4">
                                                <div class="card border-left-success shadow h-100 py-2">
                                                    <div class="card-body">
                                                        <div class="row no-gutters align-items-center">
                                                            <div class="col mr-2">
                                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                                    <a href="/my/leads?filterby=4" class="text-success">Done</a>

                                                                </div>
                                                                <div class="h5 mb-0 font-weight-bold text-gray-800">
                                                                    <t t-esc="done_lead_count" />
                                                                </div>
                                                            </div>
                                                            <div class="col-auto">
                                                                <i class="fas fa-comments fa-2x text-gray-300"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Cancelled Leads Card Example -->

                                            <div onclick="cancelledFunction()" style="cursor:pointer;" class="col-xl-3 col-md-3 mb-4">
                                                <div class="card border-left-danger shadow h-100 py-2">
                                                    <div class="card-body">
                                                        <div class="row no-gutters align-items-center">
                                                            <div class="col mr-2">
                                                                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                                    <a href="/my/leads?filterby=5" class="text-danger">Cancelled</a>
                                                                </div>
                                                                <div class="h5 mb-0 font-weight-bold text-gray-800">
                                                                    <t t-esc="cancelled_lead_count" />
                                                                </div>
                                                            </div>
                                                            <div class="col-auto">
                                                                <i class="fas fa-comments fa-2x text-gray-300"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    <div t-if="total_count == 0" class="container-fluid">
                                        <!-- DataTales Example -->
                                        <div class="card shadow mb-4">
                                            <div class="card-header py-3">
                                                <h6 class="m-0 font-weight-bold " style="color:#e48716;">Customer Leads</h6>
                                            </div>

                                            <div class="card-body">
                                                <p>There are no records in your account.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Begin Page Content -->
                                    <div t-if=" noFilter" class="filterby">
                                        <div t-if="total_count &gt; 0 " class="container-fluid">
                                            <!-- DataTales Example -->
                                            <div class="card shadow mb-4">
                                                <div class="card-header py-3">
                                                    <h6 class="m-0 font-weight-bold " style="color:#e48716;">Customer Lead</h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped">
                                                            <thead>
                                                                <tr>
                                                                    <th>Name</th>
                                                                    <th>Service</th>
                                                                    <th>ID</th>
                                                                    <th>Status</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <t t-foreach="leads" t-as="lead">
                                                                    <tr>
                                                                        <td>
                                                                            <a t-attf-href="/my/lead/#{lead.id}">
                                                                                <t t-esc="lead.name" />
                                                                            </a>
                                                                        </td>
                                                                        <td>
                                                                            <t t-esc="lead.service_id.name" />
                                                                        </td>
                                                                        <td>
                                                                            <t t-esc="lead.lead_number" />
                                                                        </td>
                                                                        <td>

                                                                            <label t-if="lead.stage_id.name == 'New'" class="badge badge-primary">
                                                                                <span>Pending</span>
                                                                            </label>
                                                                            <label t-if="lead.stage_id.name == 'Qualified'" class="badge badge-warning">
                                                                                <span>In Progress</span>
                                                                            </label>
                                                                            <label t-if="lead.stage_id.name == 'Won'" class="badge badge-success">
                                                                                <span>Done</span>
                                                                            </label>

                                                                        </td>

                                                                    </tr>
                                                                </t>


                                                                
                                                            </tbody>

                                                        </table>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>


                                </div>
                                <!-- /.container-fluid -->

                                <!-- End of Main Content -->
                                <t t-call="crmfront.crm_dashboard_footer" />
                            </div>
                            <!-- End of Content Wrapper -->

                            <!-- Scroll to Top Button-->
                            <a class="scroll-to-top rounded" href="#page-top">
                                <i class="fas fa-angle-up"></i>
                            </a>
                        </div>
                    </div>
                </body>
                <t t-call="crmfront.crm_dashboard_scripts" />
            </html>
        </xpath>
    </template>

</odoo>